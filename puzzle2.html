<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <style>
        body { background: black; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; color: white; user-select: none; font-family: sans-serif; }
        .safe-outer { width: 380px; height: 500px; background: #222; border: 4px solid #111; display: flex; justify-content: center; align-items: center; position: relative; border-radius: 10px; }
        .safe-door { width: 320px; height: 440px; background: #3a3a3a; border: 4px solid #2a2a2a; border-radius: 5px; position: relative; display: flex; flex-direction: column; align-items: center; box-shadow: inset 0 0 15px rgba(0,0,0,0.5); transition: all 0.5s ease; }
        .completed .safe-door { filter: grayscale(1) brightness(0.3); pointer-events: none; }
        #check-mark { position: absolute; font-size: 15rem; color: #00ff00; display: none; z-index: 100; text-shadow: 0 0 30px rgba(0,255,0,0.5); }
        .dial-zone { display: flex; gap: 10px; margin-top: 60px; }
        .dial-window { width: 65px; height: 80px; background: #111; border: 2px solid #555; border-radius: 5px; overflow: hidden; position: relative; cursor: pointer; }
        .dial-strip { position: absolute; width: 100%; top: 0; left: 0; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .digit { height: 80px; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: bold; color: #fff; }
        .shapes-container { display: flex; gap: 25px; margin-top: 50px; align-items: center; }
        .shape { width: 50px; height: 50px; }
        .quadrado { background: #ff4757; box-shadow: 0 0 15px #ff4757; }
        .triangulo { background: #2ed573; clip-path: polygon(50% 0%, 0% 100%, 100% 100%); filter: drop-shadow(0 0 10px #2ed573); }
        .hexagono { background: #1e90ff; clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); filter: drop-shadow(0 0 10px #1e90ff); }
        .handle { margin-top: 50px; width: 90px; height: 90px; background: radial-gradient(circle, #666, #111); border-radius: 50%; border: 4px solid #000; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.7rem; color: #aaa; transition: 0.2s; }
        .handle:active { transform: scale(0.9) rotate(45deg); }
    </style>
</head>
<body>
<div id="check-mark">âœ“</div>
<div class="safe-outer">
    <div class="safe-door">
        <div class="dial-zone">
            <div class="dial-window" onclick="spin(0)"><div class="dial-strip" id="strip0"></div></div>
            <div class="dial-window" onclick="spin(1)"><div class="dial-strip" id="strip1"></div></div>
            <div class="dial-window" onclick="spin(2)"><div class="dial-strip" id="strip2"></div></div>
        </div>
        <div class="shapes-container">
            <div class="shape quadrado"></div>
            <div class="shape triangulo"></div>
            <div class="shape hexagono"></div>
        </div>
        <div class="handle" onclick="tryOpen()">ABRIR</div>
    </div>
</div>
<script>
    const combo = [0, 0, 0];
    const strips = [document.getElementById('strip0'), document.getElementById('strip1'), document.getElementById('strip2')];
    strips.forEach(strip => {
        for(let i=0; i<10; i++) {
            const div = document.createElement('div');
            div.className = 'digit'; div.innerText = i; strip.appendChild(div);
        }
    });
    function spin(idx) {
        if (navigator.vibrate) navigator.vibrate(10);
        combo[idx] = (combo[idx] + 1) % 10;
        strips[idx].style.transform = `translateY(-${combo[idx] * 80}px)`;
    }
    function tryOpen() {
        if (combo.join('') === '436') {
            if (navigator.vibrate) navigator.vibrate(200);
            document.body.classList.add('completed');
            document.getElementById('check-mark').style.display = 'block';
            window.parent.postMessage('nextPuzzle', '*');
        } else {
            if (navigator.vibrate) navigator.vibrate([50, 100, 50]);
            const door = document.querySelector('.safe-door');
            door.animate([{ transform: 'translateX(-5px)' }, { transform: 'translateX(5px)' }, { transform: 'translateX(0)' }], { duration: 100, iterations: 2 });
        }
    }
</script>
</body>
</html>