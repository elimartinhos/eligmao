<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <style>
        body, html { 
            background: #000; 
            margin: 0; 
            padding: 0; 
            width: 100%; 
            height: 100%; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            position: fixed; /* Evita que a página role no Edge */
        }
        
        #wrapper {
            --base-w: 380;
            --base-h: 600;
            width: calc(var(--base-w) * 1px);
            height: calc(var(--base-h) * 1px);
            transform-origin: center center;
            display: flex;
            justify-content: center;
            align-items: center;
            will-change: transform; /* Melhora performance de escala */
        }

        #puzzle-frame { 
            width: 380px; 
            height: 600px; 
            border: none;
            background: #1a1a1a;
            border-radius: 20px;
        }

        #admin-skip { 
            position: fixed; 
            top: 10px; 
            right: 10px; 
            padding: 5px 10px;
            background: red; 
            border: 1px solid white;
            color: white;
            font-size: 12px;
            font-weight: bold;
            z-index: 10000;
            border-radius: 5px;
            font-family: sans-serif;
        }
    </style>
</head>
<body>

<div id="admin-skip" onclick="skipPuzzle()">SKIP</div>

<div id="wrapper">
    <iframe id="puzzle-frame" src="puzzle1.html"></iframe>
</div>

<script>
    const wrapper = document.getElementById('wrapper');
    const baseW = 380;
    const baseH = 600;

    function adjustScale() {
        // Pega a largura e altura real da janela (ignorando barras do browser)
        const winW = window.innerWidth;
        const winH = window.innerHeight;

        // Calcula a escala necessária para caber (com uma margem de segurança de 2% para não colar nas bordas)
        const scale = Math.min(winW / baseW, winH / baseH) * 0.98;

        wrapper.style.transform = `scale(${scale})`;
    }

    // Ajusta a escala ao carregar, ao girar a tela ou redimensionar
    window.addEventListener('resize', adjustScale);
    window.addEventListener('orientationchange', () => setTimeout(adjustScale, 200));
    adjustScale();

    // Lógica de navegação
    let currentPuzzle = 1;
    function nextPuzzle() {
        currentPuzzle++;
        document.getElementById('puzzle-frame').src = `puzzle${currentPuzzle}.html`;
    }

    window.addEventListener('message', (e) => {
        if (e.data === 'nextPuzzle') nextPuzzle();
    });

    // Bloqueia gestos de zoom do sistema
    document.addEventListener('gesturestart', (e) => e.preventDefault());
</script>
</body>
</html>